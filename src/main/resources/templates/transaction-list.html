<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/css/icons/css/open-iconic-bootstrap.min.css">
	<link rel="stylesheet" href="/static/css/main.css">
	<link rel="shortcut icon" href="/static/admin/images/logo.png" type="image/x-icon"/>
	<title th:text="${title}">交易列表</title>
</head>

<body class="text-center">

<div class="container d-flex h-100 p-3 mx-auto flex-column">
	<div th:replace="include :: top">header goes here.</div>
	
	<main role="main" class="inner cover" id="app">
		<table class="table table-bordered bg-light text-dark">
			<thead>
			<tr>
				<th scope="col">TxHash</th>
				<th scope="col">From</th>
				<th scope="col">to</th>
				<th scope="col">Value</th>
				<th scope="col">TimeStamp</th>
				<th scope="col">status</th>
			</tr>
			</thead>
			<tbody>
			<tr th:each="item : ${list}">
				<td><a th:text="${#strings.abbreviate(item.txHash, 20)}" target="_blank"
					th:href="@{${txViewUrl}+'/tx/'+${item.txHash}}"></a></td>
				<td>
					<a th:text="${#strings.abbreviate(item.fromAddress, 15)}" target="_blank"
					   th:href="@{${txViewUrl}+'/address/'+${item.fromAddress}}"></a>
				</td>
				<td>
					<a th:text="${#strings.abbreviate(item.toAddress, 15)}" target="_blank"
					   th:href="@{${txViewUrl}+'/address/'+${item.toAddress}}"></a>
				</td>
				<td>
					<span th:text="${item.amount.stripTrailingZeros().toPlainString()}"></span>
					<span th:text="${item.coinSymbol}"></span>
				</td>
				<td th:text="${#dates.format(item.timestamp, 'yyyy-MM-dd HH:mm:ss')}">TimeStamp</td>
				<td>
					<span class="badge badge-success" th:if="${item.status==1}">Success</span>
					<span class="badge badge-danger" th:if="${item.status==0}">Fail</span>
				</td>
			</tr>
			</tbody>
		</table>
	
	</main>
	
	<div th:replace="include :: footer">footer goes here.</div>
</div>

<script>
	new Vue({
		el: "#app",
		data: {
			address: "",
			privateKey: "",
			show: false
		},
		methods: {
			// 创建一个新钱包
			newAddress: function () {
				var that = this;
				var loading = messageLoading();
				setTimeout(function () {
					httpPost("/api/eth/newaddress", {
						userId: "016726dc4b470001a0"
					}, function
						(res) {
						messageOk("钱包创建成功.");
						loading.hide();
						var data = res.data;
						that.address = data.address;
						that.privateKey = data.privateKey;
						that.show = true;
					}, function (message) {
						loading.hide();
						messageError(message);
					});
				}, 1000);
			}
		}
	});
</script>
</body>
</html>